# 应用函数式编程原则

函数式编程最近在主流编程社区中重新引起了关注。部分原因是因为函数式范式的*不断涌现的特性*非常适应我们行业向多核心转变的挑战。然而，尽管这是一个重要的应用领域，但本文提醒你*了解函数式编程*的原因并不仅限于此。

精通函数式编程范式可以极大地提高你在其他环境中编写代码的质量。如果你深入理解并应用函数式范式，你的设计将表现出更高程度的*引用透明性*。

引用透明性是一个非常理想的特性：它意味着函数在给定相同输入的情况下始终产生相同的结果，无论它们在何时何地被调用。也就是说，函数的求值不依赖于可变状态的副作用，或者理想情况下几乎不依赖于副作用。

命令式代码中缺陷的主要原因之一是可归因于可变变量。阅读本文的每个人都曾经调查过为什么在特定情况下某个值不如预期。可见性语义可以帮助减轻这些隐匿的缺陷，或者至少大大缩小其位置范围，但它们的真正罪魁祸首实际上可能是采用了过多可变性的设计。

在这方面，我们当然没有得到行业的太多帮助。面向对象的介绍在默默地推广这样的设计，因为它们经常展示由相对持久的对象图组成的示例，这些对象愉快地相互调用着修改器方法，这可能是危险的。然而，通过敏锐的测试驱动设计，尤其是在确保["Mock Roles, not Objects"](http://www.jmock.org/oopsla2004.pdf)的情况下，不必要的可变性可以被设计消除。

最终的结果是一种设计，通常具有更好的职责分配，其中包含更多、更小的函数，这些函数作用于传递给它们的参数，而不是引用可变成员变量。缺陷将更少，而且通常更容易调试，因为在这些设计中，定位引入错误值的位置比推断导致错误赋值的特定上下文更容易。这导致了更高程度的引用透明性，没有什么比学习一个函数式编程语言更能深入理解这些思想，因为在这种计算模型中，这是常态。

当然，并不是所有情况下都适用这种方法。例如，在面向对象系统中，与用户界面开发相比，这种风格通常在领域模型开发（即，协作有助于分解业务规则的复杂性）中产生更好的结果。

精通函数式编程范式，以便能够审慎地将所学到的教训应用于其他领域。你的对象系统（其中之一）将与引用透明性的优点相一致，比许多人认为的更接近函数式的对应物。实际上，有些人甚至断言函数式编程和面向对象编程的巅峰实际上*只是彼此的一种反映*，一种计算上的阴阳形式。

由[Edward Garson](http://programmer.97things.oreilly.com/wiki/index.php/Edward_Garson)撰写