# 保持构建的清洁

你是否曾经看过一长串编译器警告，就像是一篇关于糟糕编码的文章，然后对自己说：“你知道，我真的应该处理一下这些问题... 但眼下我没有时间。” 另一方面，你是否曾经看到一个刚刚出现在编译中的警告，然后立即修复了它？

当我从头开始一个新项目时，没有警告、没有杂乱、没有问题。但随着代码库的增长，如果我不注意，杂乱、垃圾、警告和问题会开始堆积起来。当有很多噪声时，要在我不关心的数百个警告中找到我真正想要阅读的警告就变得非常困难。

为了再次让警告有用，我尽量对构建过程中的警告采取零容忍政策。即使警告不重要，我也会处理它。如果不是关键问题，但仍然相关，我会修复它。如果编译器警告可能导致空指针异常，我会修复原因，即使我“知道”这个问题永远不会在实际生产中出现。如果嵌入式文档（Javadoc或类似）引用了已删除或重命名的参数，我会清理文档。

如果是我真的不关心且真的无关紧要的事情，我会询问团队是否可以改变我们的警告政策。例如，我发现在许多情况下，记录方法的参数和返回值并没有增加任何价值，所以如果它们缺失就不应该是一个警告。或者，升级到编程语言的新版本可能会导致以前正常的代码现在产生警告。例如，当Java 5引入泛型时，所有没有指定泛型类型参数的旧代码都会产生警告。这是一种我不想被纠缠的警告（至少目前不想）。拥有一套与现实不符的警告并不对任何人有益。

通过确保构建始终保持干净，我将不必每次遇到警告时都决定它是否无关紧要。忽略事物是一种心理负担，我需要尽可能摆脱所有不必要的心理负担。保持构建的清洁还可以让其他人更容易接管我的工作。如果我留下警告，其他人将不得不浏览哪些是相关的，哪些是无关紧要的。或者更有可能的是，忽略所有警告，包括那些重要的警告。

来自构建的警告是有用的。你只需要消除噪音才能开始注意到它们。不要等待大规模的清理。当出现你不想看到的东西时，立即处理。要么修复警告的源代码，要么抑制此警告，要么修复工具的警告策略。保持构建的清洁不仅仅是保持它没有编译错误或测试失败：警告也是代码卫生的重要和关键部分。

由[Johannes Brodwall](http://programmer.97things.oreilly.com/wiki/index.php/Johannes_Brodwall)撰写
