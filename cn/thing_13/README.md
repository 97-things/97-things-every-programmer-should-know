# 代码布局的重要性

很多年前，我曾经参与开发一个 Cobol 系统，那时候员工们不被允许随意改变代码的缩进，除非他们已经有充分的理由去改变代码，因为曾经有人让一行代码滑入了位于行首的特殊列中，结果导致了一些问题的发生。即使代码的布局有时会误导人，但这个政策也适用，所以我们必须非常仔细地阅读代码，因为我们不能信任它。这个政策一定花费了大量的编程人力。

有研究表明，我们在编程中花费的时间中，大部分都是用于浏览和阅读代码，找到需要进行修改的位置，而不是实际的键入代码，所以我们希望为此进行优化。

- *易于扫描*。人们在视觉模式匹配方面非常擅长（这是我们在草原上寻找狮子时遗留下来的能力），所以通过标准化所有与领域无关的、伴随大多数商业语言的“偶然复杂性”，我可以将它们淡化为背景。如果具有相同行为的代码看起来一样，那么我的感知系统将帮助我发现其中的差异。这就是为什么我还会遵循关于如何布局编译单元中类的各个部分的惯例：常量、字段、公共方法、私有方法。

- *表达性的布局*。我们都学会了花时间找到合适的名称，以便我们的代码尽可能清晰地表达它所做的事情，而不仅仅是列出步骤，对吧？代码的布局也是这种表达性的一部分。首先要达成共识的是团队对于基本格式的自动格式化工具，然后我在编码过程中可能会手动进行调整。除非存在明显的异议，一个团队很快就会达成共同的“手工完成”的风格。格式化工具无法理解我的意图（我知道，我曾经写过一个），对我来说更重要的是，换行和分组反映代码的意图，而不仅仅是语言的语法。（Kevin McGuire 解放了我对自动代码格式化工具的束缚。）

- 紧凑的格式。我能够在屏幕上展示的内容越多，我就越能够在不滚动或切换文件的情况下保持上下文，这意味着我可以减少脑海中的状态。对于 8 个字符的名称和行打印机来说，长的过程注释和大量的空白是有意义的，但现在我使用的是具有语法着色和交叉链接功能的集成开发环境（IDE）。像素是我限制的因素，所以我希望每一个像素都有助于我理解代码。我希望布局能够帮助我理解代码，但仅限于此。

一个非程序员朋友曾经评论说代码看起来像诗。当我看到非常好的代码时，我能够感受到这种感觉，文字中的每个部分都有一个目的，它们存在的目的是帮助我理解这个思想。不幸的是，写代码并没有写诗那样浪漫的形象。

由[Steve Freeman](http://programmer.97things.oreilly.com/wiki/index.php/Steve_Freeman)撰写
