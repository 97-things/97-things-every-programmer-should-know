# 领域特定语言

无论是听专家们在任何领域的讨论，比如国际象棋选手、幼儿园教师还是保险代理人，你都会注意到他们的词汇与日常语言有很大不同。这正是领域特定语言（Domain-Specific Languages，DSLs）所关注的内容之一：特定领域具有专门的词汇来描述该领域特有的事物。

在软件领域，DSLs 是一种特定于某个领域的语言的可执行表达式，该领域的词汇和语法有限，并且可以由领域专家可读、理解，并且希望可以编写。针对软件开发人员或科学家的DSLs已经存在很长时间了。例如，Unix配置文件中的“小语言”和使用LISP宏的语言是一些较早的例子。

DSLs通常分为*内部DSLs*和*外部DSLs*两类：

- *内部DSLs*使用通用编程语言编写，其语法被弯曲得更像自然语言。这对于提供更多语法糖和格式化可能性的语言（如Ruby和Scala）来说更容易，而对于其他不提供这些功能的语言（如Java）来说则较为困难。大多数内部DSLs包装了现有的API、库或业务代码，并为用户提供了更简单的访问功能。只需运行它们即可直接执行。根据实现和领域的不同，它们用于构建数据结构、定义依赖关系、运行进程或任务、与其他系统通信或验证用户输入。内部DSL的语法受到宿主语言的限制。有许多模式，比如表达式构建器、方法链和注解，可以帮助您将宿主语言形成您的DSL。如果宿主语言不需要重新编译，那么可以在与领域专家并行工作的情况下相当快速地开发内部DSL。

- *外部DSLs*是语言的文本或图形表达方式，尽管文本DSLs比图形DSLs更常见。文本表达式可以通过包括词法分析器、解析器、模型转换器、生成器和任何其他类型的后处理工具链进行处理。外部DSLs主要被读入内部模型，这些模型构成了进一步处理的基础。定义语法（例如EBNF）是有帮助的。语法为生成工具链的某些部分（如编辑器、可视化工具、解析器生成器）提供了起点。对于简单的DSLs，手工编写解析器可能足够，例如使用正则表达式。如果对解析器要求过高，自定义解析器可能会变得难以管理，因此最好查看专门用于处理语言语法和DSLs的工具，如openArchitectureWare、ANTlr、SableCC和AndroMDA。将外部DSLs定义为XML方言也很常见，尽管对于非技术读者来说，可读性通常是个问题。

您必须始终考虑到DSL的目标受众。他们是开发人员、经理、业务客户还是最终用户？您必须根据目标受众适应语言的技术水平、可用工具、语法帮助（如IntelliSense）、早期验证、可视化和表示。通过隐藏技术细节，DSLs可以赋予用户权力，使他们能够根据自己的需求调整系统，而无需开发人员的帮助。这也可以加快开发速度，因为在初始语言框架建立之后，工作可以分布到不同的人手中。语言可以逐渐演化。对于现有表达式和语法，也有不同的迁移路径可用。

由[Michael Hunger](http://programmer.97things.oreilly.com/wiki/index.php/Michael_Hunger)撰写
